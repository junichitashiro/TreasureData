# csvファイルをS3からインポートするワークフローのテンプレート

## 概要

* S3に配置したcsvファイルをインポートする

## 処理内容

1. csvファイルを一時テーブルにインポートする
2. 一時テーブルに対してSQLを実行する
3. SQL実行結果を目的のテーブルに格納する
4. 一時テーブルを削除する

## digファイル

* csv_import_test.dig
* ワークフローの設計書となるファイル

## ymlファイル

* csv_import_test.yml
* csvファイルの入出力設定を記載するファイル
* configディレクトリ配下に配置する

## csvファイル

* sample.csv
* AWSのS3バケット配下に配置

## sqlファイル

* csv_import_test.sql
* 一時テーブルに対する処理内容を記載する

## 補足

* time列がないのでインポート時に追加する設定をymlファイルに記載する

#### レコードを絞る必要がない場合

* sqlのwhere句を記載しない
* td_loadの対象テーブルを一時テーブルから目的のテーブルに変更する
* 後者の場合sqlファイルとdigの+cast: 以下の処理は不要になる
